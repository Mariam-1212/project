from flask import abort

ALLOWED_STATUS = {"confirmed", "cancelled", "checked_in", "checked_out"}

@app.route("/update_status/<booking_id>/<status>", methods=["POST"])
def update_status(booking_id, status):
    if status not in ALLOWED_STATUS:
        abort(400)

    b = Booking.query.filter_by(booking_id=booking_id).first()
    if not b:
        abort(404)

    b.status = status
    db.session.commit()
    return redirect("/admin")
